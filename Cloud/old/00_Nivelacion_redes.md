## Conceptos B√°sicos de Redes para Cloud Computing (Unidad de Nivelaci√≥n)

### Introducci√≥n
En esta unidad de nivelaci√≥n de ~6 horas repasaremos los conceptos fundamentales de redes necesarios para desenvolverse en laboratorios de Cloud Computing con AWS. Est√° pensada para estudiantes de DAM sin experiencia previa en redes (por ejemplo, provenientes de Turismo u otras ramas). El objetivo es que, al lanzar y conectar instancias en la nube, comprendan la terminolog√≠a b√°sica y no se pierdan en conceptos de red. No es un curso exhaustivo de redes, sino una gu√≠a pr√°ctica enfocada a lo imprescindible para trabajar con instancias en AWS. Usaremos explicaciones sencillas, analog√≠as cotidianas y referencias al contexto cloud en todo momento (VPC, subredes, direcciones IP p√∫blicas/privadas, grupos de seguridad, etc.). Al final de la unidad deber√≠as saber por qu√© tu instancia no conecta y c√≥mo solucionarlo .



### ¬øQu√© es una red?

Una red inform√°tica es un conjunto de dispositivos (ordenadores, servidores, m√≥viles, etc.) conectados entre s√≠ para compartir informaci√≥n y recursos. En otras palabras, una red permite que las computadoras se comuniquen: env√≠en datos de un punto a otro (por ejemplo, navegar por una web significa que tu PC pide datos a otro servidor a trav√©s de la red). ¬øPara qu√© sirve una red? Para muchas cosas: compartir archivos e impresoras en una oficina, acceder a Internet desde casa, conectar sucursales de una empresa, o en nuestro caso, para que tu PC pueda gestionar una m√°quina virtual en AWS. Cuando decimos que algo est√° ‚Äúconectado a la red‚Äù, significa que ese dispositivo tiene conexi√≥n f√≠sica o inal√°mbrica a un sistema de comunicaciones que le da acceso al resto de la red (ya sea la red local o Internet). Estar conectado a la red implica que el dispositivo puede intercambiar datos con otros: por ejemplo, una instancia en AWS conectada a la red puede recibir nuestras peticiones SSH o enviar datos a Internet si la configuraci√≥n lo permite.

LAN, WAN e Internet: Las redes se clasifican seg√∫n su alcance geogr√°fico. Una LAN (Local Area Network) es una red de √°rea local, limitada a un espacio peque√±o (una casa, una oficina, un aula). Con una LAN podemos conectar varios dispositivos cercanos para que compartan recursos r√°pidamente (por ejemplo, en una oficina una LAN permite que todos accedan a la impresora o a un servidor interno) Ôøº Ôøº. En cambio, una WAN (Wide Area Network) abarca √°reas mucho m√°s grandes, conectando m√∫ltiples LAN a grandes distancias (por ejemplo, la red de todas las sedes de una empresa a nivel pa√≠s) Ôøº. Internet es esencialmente la WAN m√°s grande que existe: la red global que interconecta redes de todo el mundo Ôøº. Podr√≠amos decir que Internet es ‚Äúla red de redes‚Äù. Para visualizarlo, imagina que tu LAN es tu red dom√©stica, la WAN es la red de tu proveedor que conecta ciudades, e Internet conecta todas las WAN entre s√≠. Cuando un dispositivo est√° conectado a Internet, significa que su red local tiene salida a la red global, ya sea directamente o mediante alg√∫n proveedor. Por ejemplo, tu port√°til en la LAN de tu casa est√° conectado a Internet a trav√©s del router de tu ISP; una instancia de AWS en una VPC puede estar conectada a Internet si su VPC tiene una Internet Gateway configurada (m√°s adelante detallaremos esto). En resumen: LAN = local, WAN = amplia, Internet = todas las redes conectadas globalmente. Y algo tan sencillo como abrir Google desde una instancia AWS implica que esa instancia pertenece a una red (VPC) que a su vez se conecta hacia Internet.

### Direcciones IP

Para que dos dispositivos en una red se encuentren y se env√≠en datos, cada uno necesita un identificador √∫nico. En las redes inform√°ticas ese identificador es la direcci√≥n IP. Podemos pensar en la IP como la direcci√≥n postal de tu casa, o el n√∫mero de tel√©fono de tu m√≥vil, pero para dispositivos en una red. As√≠ como el cartero necesita tu direcci√≥n para entregarte una carta, en Internet los datos se env√≠an a la IP del destinatario Ôøº Ôøº. Una direcci√≥n IP es, en su versi√≥n m√°s com√∫n IPv4, una serie de cuatro n√∫meros separados por puntos, por ejemplo: 192.168.1.100. Detr√°s de esos n√∫meros hay un sistema est√°ndar de direccionamiento (definido por el Protocolo de Internet) que garantiza que cada direcci√≥n IP sea √∫nica en su red y que los routers puedan dirigir los paquetes correctamente hasta ella Ôøº Ôøº.

Analog√≠a: Podemos usar la analog√≠a del correo postal: en un sobre escribes direcci√≥n del destinatario y remitente; con IP ocurre igual, cada paquete de datos lleva la IP de destino (a qui√©n va) y la IP de origen (qui√©n lo envi√≥). Las IP funcionan como direcciones: permiten que los datos lleguen al dispositivo correcto en la red Ôøº. Por ejemplo, si tu instancia en AWS tiene IP 18.205.4.100 y quieres conectarte por SSH, tu cliente enviar√° un paquete dirigido a esa IP; los routers de Internet usar√°n esa direcci√≥n para encaminar el paquete a la red de AWS y finalmente a tu instancia. Sin IP correcta, no hay conexi√≥n (ser√≠a como mandar una carta sin direcci√≥n).

IP p√∫blica vs. IP privada: No todas las direcciones IP son iguales. Hay IP p√∫blicas (ruteables por Internet) y IP privadas (usadas solo dentro de redes locales). Las IP p√∫blicas son √∫nicas a nivel mundial y permiten que un dispositivo sea accesible desde cualquier punto de Internet (piensa en la IP p√∫blica de un servidor web). En cambio, las IP privadas se utilizan para identificar dispositivos dentro de una red interna y no son v√°lidas en Internet Ôøº. Por dise√±o, ciertos rangos de IP est√°n reservados para uso privado (llamados RFC1918). Los m√°s comunes son: 10.0.0.0/8, 172.16.0.0/12 y 192.168.0.0/16, que corresponden a rangos como 10.x.x.x, 172.16‚Äì172.31.x.x y 192.168.x.x Ôøº. Seguro te suenan, porque muchos routers de casa usan 192.168.0.x. Una computadora con IP 192.168.0.5 puede comunicarse dentro de su LAN, pero esa IP no tiene significado fuera (en Internet nadie ‚Äúve‚Äù esa 192.168‚Ä¶ porque los routers descartan ese tr√°fico privado Ôøº). Para salir a Internet, los dispositivos privados comparten una IP p√∫blica (por ejemplo, la del router mediante NAT, que veremos enseguida).

En AWS, las instancias en una VPC siempre obtienen una IP privada interna (e.g. 172.31.16.8) que las identifica dentro de esa red cloud. Si la instancia est√° en una subred p√∫blica y la configuramos para que tenga IP p√∫blica, AWS le asignar√° adem√°s una direcci√≥n p√∫blica (por ejemplo 3.85.24.117) tomada de su pool global Ôøº Ôøº. La IP privada sirve para que la instancia se comunique con otras dentro de la VPC, mientras que la p√∫blica sirve para que t√∫ (desde Internet) puedas alcanzarla. Es importante entender que la IP p√∫blica es la ‚Äúcara‚Äù de la instancia hacia Internet, y puede cambiar entre reinicios a menos que uses una fija (en AWS llamadas Elastic IP), mientras que la IP privada es fija mientras la instancia est√© viva (persistente durante paradas/arranques) Ôøº Ôøº. Si una instancia no tiene IP p√∫blica, solo ser√° accesible desde dentro de su VPC (o mediante VPN u otras soluciones de conectividad privada).

Ejemplos en AWS: Por defecto, al lanzar instancias en la VPC predeterminada de AWS, suelen recibir autom√°ticamente una IP p√∫blica Ôøº. En cambio, en una VPC personalizada, tienes subredes donde decides si asignan IP p√∫blica o no. Por ejemplo, puedes tener una instancia web en una subred p√∫blica con IP p√∫blica, y una base de datos en subred privada solo con IP privada (aislada de Internet). La instancia de BD podr√° hablar con la web (porque comparten la VPC) pero nadie desde fuera podr√° conectarse a la BD directamente, porque no tiene IP p√∫blica y su subred ni siquiera enruta a Internet. Esto es fundamental en arquitectura cloud: diferenciar qu√© recursos deben ser p√∫blicos y cu√°les privados. M√°s adelante, al configurar labs, tendr√°s que verificar: ‚Äú¬ømi instancia tiene IP p√∫blica? ¬øpuedo usar esa IP para SSH?‚Äù. Si no la tiene, a menos que est√©s en la misma red (p. ej. mediante VPN), no podr√°s llegar.

### M√°scara de subred y subnetting (concepto b√°sico)

Una subred (subnetwork) es, literalmente, una red m√°s peque√±a dentro de otra red m√°s grande Ôøº. ¬øPara qu√© se crean subredes? Principalmente para organizar y aislar el tr√°fico, mejorar la eficiencia y la seguridad. Imagina una empresa grande: en lugar de una √∫nica red gigante para todos los dispositivos, se pueden dividir en subredes (por departamentos, pisos, etc.). As√≠ el tr√°fico local de una subred no congestiona toda la red y se pueden aplicar pol√≠ticas distintas. En Internet pasa igual: las subredes permiten que los paquetes viajen por rutas m√°s directas. Siguiendo la analog√≠a postal de Cloudflare: si Alice (en su ciudad) env√≠a una carta a Bob (en la ciudad de al lado), conviene que el correo la lleve directamente a la ciudad de Bob, y no que d√© un rodeo innecesario pasando por oficinas en ciudades lejanas Ôøº. Las subredes acortan caminos: en una red grande, los routers aprenden qu√© rango (subred) est√° en qu√© direcci√≥n, y as√≠ encaminan los datos eficientemente.

T√©cnicamente, una subred se define con una m√°scara de subred, que es un patr√≥n que indica qu√© parte de la direcci√≥n IP corresponde a la red y qu√© parte a los hosts. Sin entrar en matem√°ticas, la idea es: si una IP es como ‚Äúcalle y n√∫mero‚Äù, la m√°scara nos dice hasta d√≥nde llega la ‚Äúcalle‚Äù (red) y a partir de d√≥nde es el ‚Äún√∫mero de casa‚Äù (host). Por ejemplo, en la subred 192.168.1.0/24, el /24 (255.255.255.0) indica que las primeras 3 cifras (192.168.1) definen la red, y la √∫ltima cifra identifica hosts. Eso significa que en esa subred caben IP desde 192.168.1.1 hasta 192.168.1.254 (aprox. 254 direcciones √∫tiles). Otra subred podr√≠a ser 192.168.2.0/24 para otra √°rea. Dividir en subredes es un poco como tener varias calles dentro del mismo barrio, en lugar de una calle largu√≠sima con miles de casas. Cada subred es un segmento aislado: un dispositivo de la subred A se comunica con uno de la subred B a trav√©s de un router (como si saliera de su calle al barrio general y entrara a la otra calle).

En AWS (Cloud), el concepto de subred es crucial. Cuando creas una VPC (Virtual Private Cloud), defines un rango de direcciones IP para esa red (por ejemplo, 10.0.0.0/16 para toda la VPC). Luego, dentro de esa VPC, creas subredes para distribuir tus recursos. Cada subred ocupa una porci√≥n del rango mayor. Por ejemplo, puedes dividir 10.0.0.0/16 en subredes /24: 10.0.1.0/24, 10.0.2.0/24, etc. AWS te obliga a asignar cada subred a una Zona de Disponibilidad (AZ) espec√≠fica (cada subred reside en una √∫nica AZ) Ôøº. En la ilustraci√≥n, vemos una VPC que abarca dos AZ (columna izquierda A y derecha B). En cada AZ se despleg√≥ una subred p√∫blica (verde) y una subred privada (azul). Las subredes p√∫blicas tienen una Internet Gateway (IGW, icono morado) que les da salida directa a Internet, mientras que las privadas no Ôøº. Este esquema t√≠pico se utiliza por buenas pr√°cticas: instancias de frontend (servidores web, bastiones) en subredes p√∫blicas con acceso externo, e instancias backend (BD, servidores internos) en subredes privadas sin acceso directo externo. Separarlas en subredes diferentes permite aplicar reglas distintas (por ejemplo, las privadas pueden usar un NAT Gateway para iniciar conexiones salientes, pero no reciben tr√°fico entrante de Internet directamente). En resumen: una subred en cloud es como un segmento aislado donde colocas recursos que comparten requisitos de conectividad. Te ayuda a controlar qu√© puede salir o entrar de cada segmento. M√°s adelante, cuando montes labs, ver√°s t√©rminos como ‚ÄúVPC‚Äù (tu red virtual global en AWS) y ‚Äúsubnets‚Äù (subdivisiones de esa red). Tendr√°s que lanzar instancias en subredes espec√≠ficas, y saber si esa subred es p√∫blica (con IGW) o privada (sin IGW) seg√∫n si la instancia necesita internet p√∫blica o no. Saber esto te ahorrar√° dolores de cabeza al diagnosticar: ‚Äú¬øPor qu√© mi instancia no se conecta? Ah, es que est√° en una subred aislada sin salida a Internet.‚Äù üòâ

### NAT y salida a Internet

Hablemos ahora de c√≥mo sale una red privada a Internet mediante NAT. NAT significa Network Address Translation o traducci√≥n de direcciones de red. Es una funci√≥n t√≠pica de los routers dom√©sticos: en tu casa, tu PC tiene una IP privada (ej. 192.168.0.10) y aun as√≠ navegas Internet porque tu router hace NAT. ¬øQu√© hace exactamente? Simplificando, el router toma las conexiones que tu PC inicia hacia fuera y sustituye la IP origen privada por su propia IP p√∫blica. As√≠, para los servidores externos parece que la conexi√≥n viene ‚Äúdesde el router‚Äù (IP p√∫blica), no desde tu PC privado. Luego el router recuerda esa traducci√≥n para devolver la respuesta a tu PC correcto. Esto permite que muchos dispositivos privados compartan una sola IP p√∫blica. Adem√°s, por dise√±o, evita accesos directos de fuera a dentro: nadie desde Internet puede iniciar conexi√≥n a tu PC 192.168‚Ä¶ porque esa direcci√≥n no es visible fuera (el router no sabe a qu√© dispositivo interno enviarla a menos que haya reglas espec√≠ficas). En resumen, NAT act√∫a como un portero que traduce y filtra: deja salir a los de dentro (y recuerda qui√©n sali√≥ para dejarle entrar la respuesta) pero no deja pasar a desconocidos de fuera hacia adentro, a menos que lo solicites expl√≠citamente.

En AWS ocurre igual cuando queremos que instancias en subredes privadas salgan a Internet. Supongamos que tienes una instancia sin IP p√∫blica en una subred sin ruta a IGW (una subred privada). Esa instancia por s√≠ sola ‚Äúno tiene salida a Internet‚Äù, es decir, no puede acceder a servicios externos ni actualizaciones, porque sus paquetes ni siquiera llegan a un gateway p√∫blico. La soluci√≥n es colocar un NAT Gateway (puerta de enlace NAT) en una subred p√∫blica de la misma VPC, y configurar la ruta de la subred privada para que env√≠e el tr√°fico de Internet hacia ese NAT Gateway Ôøº. El NAT Gateway es un servicio administrado por AWS que hace de traductor: recibe el tr√°fico de instancias privadas, lo reenv√≠a a Internet usando una IP p√∫blica propia, y luego reenv√≠a de vuelta las respuestas. As√≠, las instancias privadas pueden iniciar conexiones hacia fuera, pero desde fuera nadie puede iniciar una conexi√≥n directamente a ellas (porque todo se ve como si viniera del NAT). Esto refuerza la seguridad: los servidores internos pueden descargar parches, conectarse a APIs externas, etc., sin exponerse directamente.

Importante: Una instancia en AWS sin IP p√∫blica y sin NAT Gateway configurado no tendr√° salida a Internet. Por ejemplo, si lanzas una VM en una subred privada para un servidor de base de datos, de f√°brica no podr√° ni hacer ping 8.8.8.8 ni apt-get update a menos que la VPC tenga un NAT Gateway al que est√© enlazada. Muchas veces en labs la gente se frustra porque ‚Äúmi instancia no puede descargar tal cosa‚Äù y resulta que est√° en una subred sin NAT. La frase ‚Äúno tener salida a Internet‚Äù significa exactamente eso: que la instancia no puede establecer conexiones con la red global, usualmente por estar aislada tras NAT inexistente o mal configurado. La diferencia con no tener IP p√∫blica es sutil: podr√≠as no tener IP p√∫blica pero s√≠ tener NAT (caso t√≠pico de instancias privadas con NAT Gateway), entonces s√≠ tienes salida a Internet (puedes navegar/descargar) pero no tienes entrada (nadie desde fuera puede dirigirse a tu IP privada directamente). En cambio, sin NAT ni IP p√∫blica, est√°s totalmente aislado.

En resumen, NAT en AWS (mediante NAT Gateway o NAT Instance) permite a instancias privadas hacer tr√°fico saliente hacia Internet, compartiendo una IP p√∫blica del NAT Ôøº. Si no lo configuras, esas instancias estar√°n limitadas a la red interna. Por cierto, AWS tambi√©n tiene el concepto complementario de Internet Gateway (IGW) para subredes p√∫blicas: el IGW permite que instancias con IP p√∫blica sean accesibles desde Internet (y salgan tambi√©n). Sin Internet Gateway, ninguna instancia de la VPC es accesible externamente Ôøº. Por lo tanto, para tener una instancia realmente online, necesitas dos cosas: una Internet Gateway asociada a la VPC y que la instancia est√© en una subred cuya tabla de rutas env√≠e el tr√°fico internet a esa IGW Ôøº; y por supuesto, la instancia con IP p√∫blica. Si falta cualquiera de esas piezas, la instancia no ser√° alcanzable desde fuera.

Recapitulando: NAT = salen pero no entran; IGW + IP p√∫blica = entran y salen (seg√∫n reglas de firewall). En labs t√≠picos, p.ej. un bastion host (servidor de salto) se coloca en subred p√∫blica con IP p√∫blica (para que t√∫ puedas entrar por SSH) mientras servidores privados se colocan en subred privada sin IP p√∫blica (accesibles solo desde el bastion o via NAT para actualizaciones). Comprender NAT/IGW te permitir√° dise√±ar bien tu red cloud y entender mensajes como ‚ÄúInstance has no internet access‚Äù.

### DHCP

DHCP son las siglas de Dynamic Host Configuration Protocol, que traducido es algo as√≠ como ‚Äúprotocolo de configuraci√≥n din√°mica de anfitri√≥n‚Äù ‚Äì un nombre rimbombante para un servicio cuyo trabajo principal es asignar autom√°ticamente direcciones IP en una red. En otras palabras, DHCP es el que te da IP sin que tengas que configurar nada a mano. Cuando te conectas a una red WiFi y obtienes IP autom√°ticamente, o cuando una instancia de AWS arranca y ya tiene una IP interna asignada, es gracias al DHCP.

Podemos imaginar el DHCP como un ‚Äúconserje‚Äù de la red: cada vez que un dispositivo nuevo entra, el DHCP le entrega un papelito con su IP, la m√°scara de subred, la puerta de enlace (gateway) y DNS, etc. (toda la configuraci√≥n de red b√°sica) Ôøº. Esto hace la vida m√°s sencilla porque evita tener que poner IP fija manual a cada dispositivo (lo cual en redes grandes ser√≠a una locura). Adem√°s, DHCP lleva un registro para no asignar la misma IP a dos dispositivos a la vez (evitando conflictos).

¬øPor qu√© las IPs pueden cambiar? Porque con DHCP las direcciones son din√°micas. Normalmente el DHCP ‚Äúalquila‚Äù una IP al dispositivo por un tiempo (llamado tiempo de concesi√≥n). Si el dispositivo se desconecta por un rato, puede que al volver reciba otra IP, dependiendo de lo que el servidor DHCP tenga disponible. En casa quiz√°s notas que a veces tu m√≥vil es 192.168.0.5 y otro d√≠a 192.168.0.7 ‚Äì es DHCP reasignando. En redes corporativas, se pueden hacer reservas para que ciertos equipos siempre obtengan la misma IP, pero por defecto es normal que cambien con el tiempo o reinicios.

En AWS, todas las instancias reciben su IP privada via DHCP Ôøº. Cuando lanzas una instancia en una subred, AWS act√∫a como servidor DHCP y le asigna una IP privada libre del rango de la subred Ôøº. Esta IP privada principal permanece asociada mientras la instancia est√© viva (aunque puedes detenerla y arrancarla y conservar√° la misma privada, ya que AWS la reserva para esa instancia). Sin embargo, si terminas la instancia, esa IP vuelve a la ‚Äúpiscina‚Äù para otras futuras. Para las IP p√∫blicas din√°micas que AWS asigna (no las Elastic), AWS tambi√©n las gestiona din√°micamente: cada vez que paras/inicias la instancia se libera la p√∫blica antigua y se le puede asignar una nueva Ôøº. Por eso se recomienda usar Elastic IP (IP fija) si necesitas una IP p√∫blica permanente. Pero volviendo a DHCP: lo fundamental es entender que las IP asignadas autom√°ticamente no son ‚Äúpropiedad‚Äù permanente del recurso, sino configuraciones din√°micas. Si apagamos una instancia y lanzamos otra nueva, no esperemos que m√°gicamente tenga la misma IP privada o p√∫blica a menos que hayamos configurado reservas espec√≠ficas.

Nota: DHCP no solo asigna la IP, t√≠picamente tambi√©n comunica la puerta de enlace por defecto (el router de salida) y el/los servidores DNS que debe usar el dispositivo. As√≠, un equipo reci√©n conectado ya sabe c√≥mo salir de su subred y c√≥mo resolver nombres, sin intervenci√≥n humana. En AWS, el DHCP interno de la VPC asigna como gateway la IP ‚Äú.1‚Äù de la subred (que suele ser la direcci√≥n del router interno de la VPC) y como DNS suele dar la IP del servicio DNS de la VPC (para resolver nombres internos de AWS). Todo eso ocurre tras bambalinas al lanzar instancias.

En resumen, DHCP = configuraci√≥n autom√°tica. ¬øQu√© implica para ti en labs? Que normalmente no tendr√°s que configurar la IP manualmente dentro de la instancia; vendr√° dada. Pero significa tambi√©n que puede cambiar si destruyes/creas instancias nuevas, por lo que conviene no fiarse de la IP privada a largo plazo para identificar una m√°quina (mejor usar nombres o asignar IPs el√°sticas si necesitas algo est√°tico p√∫blico). Y si de pronto tu instancia ‚Äúno tiene IP‚Äù (muy raro en AWS porque siempre hay DHCP en VPC), podr√≠a indicar un problema de DHCP/routing. En un entorno local, cuando un PC no logra obtener DHCP suele autoconfigurarse en 169.254.x.x (APIPA) Ôøº, indicando ‚Äúno encontr√© servidor DHCP‚Äù. En AWS esto no pasa porque el DHCP es parte integral del servicio VPC.

### Puertos y protocolos

Hasta ahora hemos hablado de direcciones IP (qui√©n es qui√©n en la red). Pero cuando dos dispositivos se comunican, normalmente no es solo enviando datos ‚Äúa la m√°quina tal‚Äù, sino a un servicio espec√≠fico en esa m√°quina. Aqu√≠ entran los puertos: un puerto es como una extensi√≥n interna o puerta l√≥gica dentro de un dispositivo donde ‚Äúescucha‚Äù un cierto servicio Ôøº. Por ejemplo, un servidor web en la IP 54.85.13.20 podr√≠a estar escuchando en el puerto 80. Si env√≠as una petici√≥n a 54.85.13.20:80, llegas al servicio web; si env√≠as a 54.85.13.20:22, llegas al servicio SSH (si est√° corriendo). Los puertos permiten que un mismo servidor con una IP √∫nica ofrezca m√∫ltiples servicios a la vez sin confundirlos, porque cada servicio usa su puerto dedicado.

Podemos pensar en la IP como la direcci√≥n de un edificio, y los puertos como n√∫meros de apartamento o extensiones. El paquete llega al edificio (IP) y luego se entrega al apartamento correcto (puerto) seg√∫n a qui√©n va dirigido. Todos los sistemas operativos manejan ~65.535 puertos posibles (0 al 65535) para cada IP. Los puertos bien conocidos (0-1023) est√°n estandarizados para servicios comunes Ôøº. Algunos esenciales que debes reconocer: puerto 22 = SSH (acceso remoto seguro) Ôøº, puerto 80 = HTTP (web en texto plano) Ôøº, puerto 443 = HTTPS (web segura cifrada) Ôøº. Tambi√©n, por si acaso: puerto 3389 = RDP (escritorio remoto Windows), puerto 3306 = MySQL, puerto 5432 = PostgreSQL, puerto 25 = SMTP (correo), etc. En general, cuando veas un n√∫mero de puerto sabr√°s qu√© tipo de tr√°fico espera. Por ejemplo, si abres el SG de AWS en el puerto 443, est√°s permitiendo acceso HTTPS, si abres el 22, es acceso SSH, etc. Si intentas conectar por SSH a una instancia pero en AWS no abriste el puerto 22, es como llegar al edificio pero la puerta del apartamento est√° cerrada.

Protocolos TCP vs UDP: Los puertos funcionan junto con los protocolos de transporte, principalmente TCP (Transmission Control Protocol) y UDP (User Datagram Protocol). Sin ponernos muy t√©cnicos, la diferencia es c√≥mo se env√≠an los datos:
	‚Ä¢	TCP es como una llamada telef√≥nica: se establece una conexi√≥n, hay confirmaciones de recibido, garant√≠a de que los datos llegan completos y en orden. Es fiable pero un poco m√°s lento debido a ese control Ôøº Ôøº. Se usa en aplicaciones donde perder datos no es aceptable, p.ej. navegar webs, transferir archivos, correos, SSH‚Ä¶ Prefieres que llegue todo y bien.
	‚Ä¢	UDP es como enviar postales o notas sin acuse de recibo: lanzas los datos ‚Äúa la red‚Äù sin establecer una conexi√≥n formal, no hay confirmaci√≥n ni reintentos. Es m√°s r√°pido pero no garantiza entrega Ôøº Ôøº. Se usa donde prima la velocidad sobre la confiabilidad, p.ej. en streaming de video/audio, VoIP, juegos online, DNS queries. Si se pierde un paquete da igual, llegan los siguientes.

En resumen, TCP = confiabilidad (retransmite si hay p√©rdidas, ordena, evita errores); UDP = velocidad (menos sobrecarga) Ôøº Ôøº. Como analog√≠a: TCP es un env√≠o certificado con seguimiento, UDP es tirar un folleto en todos los buzones esperando que llegue. Ejemplos: cuando haces SSH (texto), va por TCP porque cada car√°cter importa; cuando haces una videollamada, suele ir por UDP, porque es preferible ver en vivo con alg√∫n pixel perdido que esperar retrasos por correcciones.

Para nosotros: la mayor√≠a de los labs cloud iniciales involucrar√°n TCP, porque usar√°s SSH (TCP/22), HTTP/HTTPS (TCP/80, TCP/443) etc. UDP aparecer√≠a si montas algo de DNS o streaming en cloud (menos com√∫n para principiantes). Pero est√° bien saber que si alguna vez pruebas conectarte a un servicio y te dicen ‚Äúabre UDP 1194‚Äù (por ejemplo, para OpenVPN), es otro protocolo y hay que permitirlo espec√≠ficamente. AWS Security Groups te dejan especificar en cada regla si es TCP, UDP o ICMP, etc., as√≠ que debes elegir correctamente seg√∫n el servicio.

Resumiendo puertos: Piensa en ‚ÄúIP:puerto‚Äù como ‚Äúdirecci√≥n:departamento‚Äù. Y los servicios t√≠picos tienen n√∫meros fijos (22, 80, 443‚Ä¶) Ôøº. Un escaneo de puertos en una m√°quina te dice qu√© puertas est√°n abiertas (o sea, qu√© servicios responden). Para nuestras instancias AWS, por defecto ninguna puerta est√° abierta externamente salvo que lo especifiquemos en el grupo de seguridad (ya llegaremos a firewalls).

### Firewall

Un firewall (cortafuegos) es un componente de seguridad que filtra el tr√°fico de red seg√∫n reglas definidas. Act√∫a como un guardia que decide qu√© paquetes dejar pasar y cu√°les bloquear, t√≠picamente bas√°ndose en criterios como la IP de origen/destino, el puerto, el protocolo, etc. Los firewalls pueden ser hardware dedicado o software en cada m√°quina. En cualquier caso, su funci√≥n es proteger restringiendo comunicaciones no deseadas o potencialmente peligrosas.

Cuando decimos ‚Äúbloquear un puerto‚Äù, b√°sicamente significa que el firewall est√° configurado para no permitir tr√°fico en ese puerto (puede ser en entrada, en salida o ambas). Por ejemplo, si un firewall ‚Äúbloquea el puerto 22‚Äù, ning√∫n intento de conectar por SSH llegar√° al servicio; el firewall lo descarta antes. Igual con ‚Äúbloquear puerto 80‚Äù en salida, ning√∫n navegador podr√≠a acceder a webs (muy usado en entornos corporativos para controlar navegaci√≥n). Por defecto, muchos firewalls personales bloquean todo puerto entrante no autorizado para evitar intrusiones.

En AWS tenemos los Security Groups (grupos de seguridad), que funcionan como firewalls virtuales por instancia Ôøº. Cada instancia EC2 est√° asociada a uno o varios grupos de seguridad, y las reglas de esos grupos determinan qu√© tr√°fico entrante est√° permitido hacia la instancia y qu√© tr√°fico saliente puede salir Ôøº. Por ejemplo, un t√≠pico SG para un servidor web permite entrada al puerto 80/443 desde Internet (0.0.0.0/0) y al puerto 22 solo desde la IP del administrador, pero bloquea el resto. Los security groups son stateful, es decir, recuerdan conexiones establecidas: si permites entrada por 443, la respuesta saldr√° aunque no tengas regla de salida espec√≠fica, y viceversa Ôøº. Un detalle importante: por defecto, al lanzar una instancia, su SG inicial suele no permitir nada de entrada (pero s√≠ permite todo de salida). Esto significa que, si olvidas a√±adir una regla de SSH entrante, no podr√°s conectar por m√°s que la instancia tenga IP p√∫blica y est√© encendida. Siempre verifica el firewall cloud.

Firewall local vs Firewall cloud: En una instancia puedes tener dos niveles de firewall:
	‚Ä¢	El firewall local es el que corre dentro del sistema operativo de la instancia (por ejemplo, iptables/UFW en Linux, o Windows Defender Firewall en Windows). Ese controla el tr√°fico en el propio host.
	‚Ä¢	El firewall cloud (grupo de seguridad en AWS, o NACL a nivel de subred) controla el tr√°fico antes de llegar a la instancia, en la capa de la infraestructura de AWS.

¬øCu√°l es la diferencia pr√°ctica? Si el firewall cloud bloquea algo, el tr√°fico ni siquiera toca tu instancia (AWS lo descarta). Si el SG lo permite pero el firewall del sistema lo bloquea, el tr√°fico llega a la m√°quina pero esta lo descarta. Para efectos de labs, muchas veces con ajustar el SG es suficiente porque podr√≠as dejar el firewall interno abierto o deshabilitado. AWS Security Groups son m√°s sencillos de manejar centralmente. Sin embargo, es buena pr√°ctica entender ambos. Ejemplo: Podr√≠as tener puerto 80 abierto en el SG, pero dentro de la instancia no tener ning√∫n servicio escuchando o tener el firewall local deneg√°ndolo; resultado: no hay respuesta en 80. O viceversa: servicio listo en 80, firewall SO abierto, pero SG cerrado -> tampoco hay acceso. Por eso, al solucionar problemas, revisamos tanto SG (cloud) como firewall OS (local).

Una met√°fora: imagina un castillo con muralla exterior (SG) y guardias en la puerta del castillo (firewall del servidor). Si no abres la muralla, nadie llega al castillo; si abres la muralla pero la puerta del castillo est√° cerrada, tampoco entran. En entornos AWS edu, es com√∫n confiar en SG principalmente. De hecho, a menudo en entornos cloud se deshabilita el firewall interno o se configura para que no interfiera, y se maneja todo con SG y Network ACLs. Security Group vs NACL: Por cierto, adem√°s de SG por instancia, AWS tiene Network ACLs a nivel de subred, que son firewalls stateless que aplican a todo tr√°fico de la subred. Suelen dejarse en ‚Äúallow all‚Äù en labs simples, pero en producci√≥n a√±aden otra capa (p.ej. bloquear puertos a nivel subnet).

Resumiendo: un firewall controla qu√© tr√°fico pasa o no pasa. En AWS, el Grupo de Seguridad es ‚Äúla muralla‚Äù de cada instancia: define qu√© IPs/puertos entrantes est√°n permitidos. Un SG por defecto en blanco bloquea todo (excepto respuestas a salidas) Ôøº. Para acceder a tu instancia debes abrir el puerto 22 al menos para tu IP, etc. Si luego montas un servidor web en el puerto 8080, tendr√°s que agregar una regla permitiendo 8080, si no te parecer√° ‚Äúno funciona‚Äù aunque el servidor est√© corriendo. La diferencia entre firewall local y cloud radica en d√≥nde se aplica, pero la funcionalidad base es la misma. Como administradores cloud juniors, nunca olviden revisar el SG cuando no puedan conectar üòÖ.

### DNS (Domain Name System) ‚Äì nivel b√°sico

Las DNS son a menudo llamadas ‚Äúla agenda de contactos de Internet‚Äù. ¬øPor qu√©? Porque trabajar solo con direcciones IP ser√≠a engorroso para los humanos. En lugar de recordar que la IP de Google es 142.250.190.78, simplemente tecleamos google.com. DNS es el sistema que se encarga de traducir esos nombres de dominio a sus direcciones IP correspondientes Ôøº Ôøº. Igual que en el m√≥vil buscas por nombre ‚ÄúMam√°‚Äù y el tel√©fono marca el n√∫mero guardado, en Internet tu PC pregunta al DNS ‚Äú¬øqu√© IP tiene google.com?‚Äù y DNS responde ‚Äú142.250.190.78‚Äù (por ejemplo), entonces tu PC ya se conecta all√≠. Sin DNS tendr√≠as que memorizar cientos de n√∫meros.

C√≥mo funciona (brevemente): Cuando escribes un nombre de host (por ejemplo midb.corp.local o www.amazon.com), tu dispositivo contacta a un servidor DNS (normalmente el de tu proveedor o el que configure DHCP, ej. 8.8.8.8 de Google) y le consulta por ese nombre. El sistema DNS es jer√°rquico; si el primer servidor no lo sabe, va preguntando a otros (primero a los root, luego al DNS autoritativo del dominio, etc.) Ôøº Ôøº. Finalmente obtiene la IP y te la da. Todo esto suele ocurrir en milisegundos y queda transparente para el usuario.

Analog√≠a agenda telef√≥nica: Siguiendo la analog√≠a, podr√≠amos decir: el nombre de dominio es el nombre de la persona, la IP es el n√∫mero de tel√©fono. Un servidor DNS es como la operadora o la propia gu√≠a: t√∫ dices ‚Äúbusco PizzaPepinillos.com‚Äù y DNS te devuelve ‚Äúah, llame al 52.85.133.95‚Äù. De hecho, se suele describir DNS directamente como ‚Äúla gu√≠a telef√≥nica de Internet‚Äù Ôøº. En ambientes corporativos internos tambi√©n hay DNS para resolver nombres locales (por ejemplo archivo.empresa a la IP interna X).

¬øPor qu√© necesitas DNS incluso en cloud? Porque aunque est√©s trabajando con instancias y servicios en AWS, seguir√°s usando nombres para muchas cosas. AWS asigna nombres DNS internos a las instancias (ej: ip-10-0-1-25.ec2.internal) que resuelven a sus IP privadas, y tambi√©n puede asignar nombres p√∫blicos (ec2-3-85-10-2.compute-1.amazonaws.com) que apuntan a la IP p√∫blica. Cuando haces SSH probablemente usar√°s la IP directamente, pero podr√≠as usar el nombre p√∫blico. Adem√°s, servicios como AWS Lambda, S3, RDS y much√≠simos otros se acceden v√≠a nombres DNS (por ejemplo mybucket.s3.amazonaws.com o el endpoint de una base de datos RDS es un nombre DNS). Si tu instancia no pudiera resolver DNS, tendr√≠a problemas para alcanzar otros servicios por nombre. Por eso, en cada VPC AWS hay un resolver DNS interno que suele estar disponible en la IP .2 de la rango VPC para que las instancias puedan resolver nombres (tanto de Amazon como externos, si tienen salida a Internet).

Otro caso: en labs avanzados puede que configures tu propio dominio para apuntar a la IP de una instancia (ej: un sitio web personalizado). Entonces usar√°s un servicio DNS (quiz√° Route 53 de AWS) para crear un registro tipo A que mapee www.midominio.com a la IP p√∫blica X de tu instancia. As√≠ tus usuarios usan el nombre, no la IP directamente.

En resumen, DNS es esencial para la usabilidad. A efectos pr√°cticos, cuando todo funciona no notas su presencia; pero cuando falla, de pronto ‚Äúno hay internet‚Äù (porque ning√∫n nombre resuelve). En la nube, la mayor√≠a de veces se configura autom√°ticamente, pero conviene saberlo: si tu instancia no se puede conectar a updates.ubuntu.com pero s√≠ al 91.189.88.152 (IP de ubuntu updates), es s√≠ntoma de problema DNS. Y si montas redes privadas sin Internet, necesitar√°s igualmente resolver nombres privados o p√∫blicos (v√≠a DNS interno o vinculado a DNS on-premise).

Recapitulando: DNS traduce nombres ‚Üî IPs, como un servicio de agenda Ôøº. Es invisible pero cr√≠tico en cloud y fuera de cloud. AWS tiene su propio Amazon DNS interno para VPC, y tambi√©n ofrece Route 53 para gestionar nombres de dominios propios. No necesitas memorizar IPs de instancias si puedes usar sus nombres, o mejor a√∫n, si configuras un DNS interno para tu aplicaci√≥n (aunque en labs peque√±os con pocas instancias usar IPs directas no es fin del mundo, pero no escalable).

### Acceso remoto (SSH y requisitos para conectar)

Al lanzar instancias en AWS (sobre todo Linux), una de las primeras cosas que querr√°s es conectarte remotamente a ellas para administrarlas. Aqu√≠ entra SSH (Secure Shell), el protocolo por excelencia para acceso remoto seguro a m√°quinas Linux/Unix. ¬øQu√© es SSH? Es un protocolo que te permite abrir una consola/terminal en otra m√°quina de forma segura (cifrada) a trav√©s de la red. Funciona con un modelo cliente-servidor: tu PC act√∫a como cliente SSH y la instancia AWS corre un servidor SSH (por defecto, la mayor√≠a de AMIs Linux ya tienen sshd funcionando). Cuando te conectas, estableces una sesi√≥n cifrada donde puedes ejecutar comandos como si estuvieras frente a la m√°quina.

Con SSH puedes hacer pr√°cticamente todo en una instancia en modo texto (instalar paquetes, editar config, ver logs‚Ä¶). Es la ventana de administraci√≥n principal. Alternativas en Windows son RDP (escritorio gr√°fico remoto), pero para Linux SSH manda.

¬øQu√© necesita un alumno (o cualquiera) para poder conectarse a una instancia por SSH? Hay varios requisitos imprescindibles:
	1.	Direcci√≥n accesible de la instancia: en AWS, si est√°s desde internet, eso significa que la instancia tenga una IP p√∫blica o un nombre DNS p√∫blico asociado a una IP p√∫blica. Si la instancia solo tiene IP privada, solo podr√°s SSH si est√°s conectado a la misma red interna (por ejemplo, conectado por VPN a la VPC, o desde un bastion host p√∫blico dentro de la VPC). En labs iniciales normalmente se asigna IP p√∫blica a las instancias para que los alumnos accedan f√°cilmente.
	2.	Puerto 22 abierto en el firewall (Security Group): el servidor SSH por defecto escucha en el puerto 22. El SG de la instancia debe tener una regla inbound permitiendo el puerto 22 desde la IP o rango del alumno. Por ejemplo, permitir SSH desde ‚ÄúMiIP/32‚Äù o quiz√°s desde 0.0.0.0/0 (aunque esto √∫ltimo es menos seguro porque permitir√≠a intentos de cualquiera). Si este puerto est√° bloqueado, la conexi√≥n ser√° rechazada o agotar√° tiempo.
	3.	Credenciales de acceso (clave privada SSH): AWS no usa usuario/contrase√±a tradicionales para instancias Linux (a menos que las configures). En su lugar, utiliza pares de claves SSH. Cuando lanzas una instancia, especificas o generas una key pair (par de claves) y descargas la clave privada (.pem). La instancia almacena la clave p√∫blica correspondiente. Para iniciar sesi√≥n, debes presentar tu clave privada al cliente SSH y este hace autenticaci√≥n sin contrase√±a (clave p√∫blica/privada). ¬°Es crucial guardar bien la clave .pem! Sin ella, no podr√°s autenticarte (a menos que configures otro m√©todo despu√©s). En t√©rminos pr√°cticos: el alumno debe tener el archivo .pem correcto y usar un comando del tipo ssh -i miclave.pem usuario@IP (o su equivalente en PuTTY si est√° en Windows y convirti√≥ la clave a .ppk). El usuario tambi√©n importa: para Amazon Linux es ec2-user, para Ubuntu es ubuntu, para RHEL ec2-user o root dependiendo, etc. AWS suele indicar el nombre de usuario seg√∫n la AMI.
	4.	Software cliente SSH en su equipo: Hoy d√≠a todos los OS vienen con uno (Windows 10+ ya trae OpenSSH en terminal, Mac/Linux traen terminal SSH). O pueden usar PuTTY/Termius etc. Esto no es tanto un requisito de red, pero s√≠ pr√°ctico: necesitar una herramienta para usar la clave y abrir la sesi√≥n.
	5.	Conectividad de red end-to-end: es decir, que nada en el camino lo impida. Por ejemplo, que tu red local no bloquee salidas por puerto 22 (algunas WiFi empresariales podr√≠an bloquear SSH). O que la ruta est√© bien (una mala ruta o NACL en AWS tambi√©n podr√≠a impedirlo, aunque con SG bien y IGW deber√≠a estar ok). Pero normalmente si tienes IP p√∫blica y SG ok, la conectividad est√°. Puedes verificar con un ping (si ICMP est√° habilitado) o simplemente probando el ssh.

Ejemplo pr√°ctico: Tienes una instancia i-12345 en AWS. Le asignaste key pair alumno1.pem. Tiene IP p√∫blica 18.204.x.y. Configuras su Security Group para permitir SSH desde tu direcci√≥n (supongamos 80.35.50.60/32). En tu PC (80.35.50.60) abres terminal y escribes ssh -i alumno1.pem ec2-user@18.204.x.y. Si todo va bien, la primera vez te preguntar√° aceptar huella (dile yes) y luego estar√°s dentro con [ec2-user@ip-... ~]$. ¬°Ya tienes control de la instancia! Si algo falla:
	‚Ä¢	Timeout o ‚ÄúNo route to host‚Äù: probablemente IP o ruta mal (¬øla instancia est√° encendida? ¬øtiene IP p√∫blica? ¬øsubred tiene IGW?).
	‚Ä¢	‚ÄúPermission denied‚Äù r√°pido: probablemente el SG no permit√≠a SSH.
	‚Ä¢	‚ÄúPermission denied (publickey)‚Äù: conectaste pero la clave no es aceptada -> usaste usuario o clave incorrectos.
	‚Ä¢	‚ÄúHost not found‚Äù: error DNS -> tu cliente no pudo resolver el nombre (si usaste nombre en vez de IP, revisar DNS o usar IP).
	‚Ä¢	Conexi√≥n cerrada de inmediato: a veces firewall local de instancia rechaza, o falta algo en config.

SSH en contexto Cloud: En labs AWS normalmente todos los alumnos descargan una clave privada para sus instancias. Es fundamental mantener esa clave privada segura (no compartirla) y dar los permisos adecuados al archivo (chmod 400 en Linux) para que SSH la use. Tambi√©n, si trabajas desde la facultad, quiz√°s la IP de la sala es compartida y el SG de AWS tiene que permitirla. O se puede permitir rango amplio provisionalmente. La idea es concientizar que sin la trifecta IP p√∫blica + puerto 22 abierto + clave correcta, no habr√° acceso. Tip: Si por error lanzas instancia sin IP p√∫blica, a√∫n podr√≠as acceder si lanzas otra instancia en la misma VPC que s√≠ tenga (bastion) y desde all√≠ entrar a la privada v√≠a IP privada + clave (pero eso es m√°s avanzado).

Por √∫ltimo, mencionar RDP para Windows: Si tu instancia es Windows, usar√°s RDP en vez de SSH. RDP usa puerto 3389 TCP, y en AWS la autenticaci√≥n es con usuario (Administrator) y una contrase√±a que se obtiene desencriptando con la key pair. Pero en ambos casos necesitas IP p√∫blica o VPN, SG abierto en 3389, etc.

### VPN (concepto y ejemplo pr√°ctico)

VPN = Virtual Private Network o red privada virtual. Es una tecnolog√≠a que permite establecer una conexi√≥n segura (encriptada) sobre Internet de tal forma que un dispositivo remoto se integra a una red local como si estuviera f√≠sicamente all√≠. Dicho de otro modo, una VPN crea un ‚Äút√∫nel‚Äù cifrado a trav√©s de la red p√∫blica que conecta dos extremos privados Ôøº Ôøº. As√≠, equipos de un lado pueden comunicarse con recursos del otro lado de forma segura y transparente, porque el t√∫nel hace que todo el tr√°fico parezca local.

¬øPara qu√© sirve una VPN? Tiene muchos usos:
	‚Ä¢	Acceso remoto seguro de usuarios individuales: Por ejemplo, un alumno desde casa puede activar una VPN que lo conecte a la red interna del instituto. Una vez conectada, su PC obtiene quiz√°s una IP interna del campus y puede acceder a recursos restringidos (como si estuviera dentro de la escuela), a trav√©s de Internet pero cifrado. Esto se llama VPN de acceso remoto.
	‚Ä¢	Interconexi√≥n de redes (sitio a sitio): Por ejemplo, una empresa conecta su oficina central con su VPC en AWS mediante VPN. En cada extremo hay un gateway VPN (un router o firewall con capacidad VPN), negocian un t√∫nel cifrado entre ellos, y ¬°voil√†! la red de la oficina y la red de la VPC se ven mutuamente. Esto se llama VPN site-to-site. Desde la perspectiva de un servidor en AWS, los PCs de la oficina podr√≠an llegarle por su IP privada a trav√©s del t√∫nel, como si todos formaran parte de la misma LAN extendida (por eso ‚ÄúRed Privada Virtual‚Äù).
	‚Ä¢	Privacidad/Anonimato en Internet: Mucha gente usa VPN personales (tipo NordVPN, ExpressVPN) que cifran su tr√°fico y salen a Internet por otro pa√≠s, etc., para proteger datos en WiFi p√∫blicas o sortear restricciones. No es foco de este curso, pero es otra aplicaci√≥n (en ese caso la VPN conecta tu dispositivo con un servidor VPN en otro lugar, y tu navegaci√≥n sale por ese servidor).

Focalicemos en entornos cloud: Conectar oficina con cloud. Si una empresa ya tiene su LAN local y empieza a usar AWS, puede montar una VPN AWS (AWS Site-to-Site VPN) entre su router on-premise y un Virtual Private Gateway en la VPC Ôøº. As√≠, los servidores en AWS (en subred ‚Äúonly VPN‚Äù) podr√°n comunicarse con la red local de forma segura Ôøº. Esto es √∫til para, digamos, extender tu datacenter al cloud: tus apps en AWS podr√≠an consultar la base de datos que est√° en tu oficina mediante VPN, o viceversa. AWS tambi√©n ofrece Client VPN para que usuarios remotos se conecten a la VPC, similar a conectarse a la oficina. En labs acad√©micos, podr√≠as usar una VPN si tu instancia no tiene IP p√∫blica: conectas tu PC a la VPC via VPN y ya tienes acceso a las IP privadas. Sin embargo, configurar una VPN requiere pasos adicionales y quiz√°s no lo hagan en los primeros labs.

¬øC√≥mo funciona la VPN? A alto nivel, dos extremos crean un t√∫nel cifrado. Todo paquete que sale de un lado se cifra y se encapsula para viajar por Internet hasta el otro lado, donde se decapsula. Piensa en el t√∫nel como un sobre cerrado: los datos viajan seguros dentro de √©l. Protocolos comunes de VPN incluyen IPsec (nivel red) y TLS/SSL (nivel aplicaci√≥n, como OpenVPN). Una vez establecido, los dispositivos se comportan como si estuvieran en la misma red privada. Por eso decimos ‚Äúvirtual‚Äù (no es un cable f√≠sico, es sobre Internet), pero ‚Äúprivada‚Äù (porque nadie m√°s puede leerla, va cifrado).

Ejemplo concreto: Imagina que montas una m√°quina VPN en AWS y la configuras tipo OpenVPN. Te conectas desde tu port√°til de casa con las credenciales, y de pronto tu port√°til tiene IP 10.0.8.10 que es parte de la VPC de AWS. Ahora puedes hacer SSH a la instancia privada 10.0.1.5 como si estuvieras en la red de AWS, aunque f√≠sicamente est√©s en casa. Todo el tr√°fico entre tu port√°til y AWS va cifrado por Internet, as√≠ que es seguro incluso si lo haces desde una WiFi de cafeter√≠a. Otro ejemplo, m√°s empresarial: tu empresa ACME tiene la red 192.168.10.0/24 en la oficina y la VPC 10.0.0.0/16 en AWS. Configuran un VPN IPsec entre el firewall SonicWall de la oficina y el gateway de AWS. Tras eso, los PCs 192.168.10.x pueden acceder a servidores 10.0.x.y de AWS y viceversa, sin pasar por internet abierta. Para los usuarios, el servidor en AWS podr√≠a incluso resolverse con un nombre interno y parecer un servidor m√°s de su LAN.

¬øPor qu√© ‚Äúnivelaci√≥n‚Äù en este tema? Porque en cloud es com√∫n que para entornos h√≠bridos necesites VPN o conexiones privadas (Direct Connect). No entraremos a configurarlos aqu√≠, pero debes saber qu√© es: tunel seguro que une redes separadas. As√≠, si lees ‚Äúesta instancia solo es accesible v√≠a VPN‚Äù entiendes que no tiene IP p√∫blica; debes estar conectado mediante la red privada virtual para llegar a ella. O si se dice ‚Äúconectaremos la VPC a on-prem mediante VPN site-to-site‚Äù, sabes que habr√° un tunel cifrado constante. Y al solucionar un problema: si la VPN cae, de pronto los recursos no se ven. Diagn√≥stico all√≠ es otro cantar (ver logs de t√∫nel, etc.), pero conceptualmente, VPN = acceso seguro a red remota.

Diagn√≥stico b√°sico de red (ping, traceroute y fallos t√≠picos)

Por √∫ltimo, veamos algunas herramientas b√°sicas de diagn√≥stico de red que te ayudar√°n a identificar problemas de conectividad: ping y traceroute (en Windows se llama tracert). Seguramente ya las has usado, pero las pondremos en contexto cloud.

Ping: Es la forma m√°s simple de comprobar si un host est√° activo y accesible en la red. El comando ping env√≠a paquetes especiales ICMP Echo Request (ping) al destino, y espera ICMP Echo Response (pong). Si recibe respuesta, significa que:
	‚Ä¢	El paquete lleg√≥ al destino y volvi√≥, por tanto hay conectividad IP entre t√∫ y el destino.
	‚Ä¢	Adem√°s, te da el tiempo de ida y vuelta (latencia), √∫til para ver si la conexi√≥n es r√°pida o hay retraso (p. ej. ping de 20ms vs 200ms vs 2000ms).
	‚Ä¢	Si no hay respuesta, puede indicar que el host est√° ca√≠do, o no hay ruta, o simplemente que el firewall bloquea ICMP (muchos sitios lo bloquean).

En una instancia AWS, por defecto el Security Group bloquea ICMP (a menos que agregues regla de ‚ÄúAll ICMP‚Äù o Echo). As√≠ que si intentas ping a la IP p√∫blica de tu instancia reci√©n creada, es probable que obtengas timeout. Esto no necesariamente significa que la instancia est√© apagada; puede ser el firewall. Por ende, ping es √∫til pero con precauci√≥n: ‚Äúno hace ping‚Äù no siempre = ‚Äúno est√° funcionando‚Äù. Sin embargo, dentro de una VPC, puedes habilitar ping entre instancias (abriendo ICMP) para comprobar que se ven. O hacer ping a un recurso externo (8.8.8.8) para verificar que tu instancia tiene salida a Internet.

Traceroute: Es la herramienta para trazar la ruta que siguen los paquetes hacia un destino, pasando por todos los routers intermedios. B√°sicamente hace m√∫ltiples pings con incrementos en el TTL (tiempo de vida) para provocar que cada router en la ruta responda, list√°ndolos uno a uno Ôøº Ôøº. El resultado es una lista de saltos: te muestra por qu√© nodos pasa la conexi√≥n. Por ejemplo, un traceroute de tu PC a una instancia AWS puede mostrar hops saliendo de tu ISP, pasando por redes troncales, llegando a la red de Amazon y finalmente a la instancia (o m√°s bien al √∫ltimo router antes de ella). ¬øPara qu√© sirve? Principalmente para diagnosticar d√≥nde se produce un problema o retardo. Si te quedas en el salto 5 y luego timeout, sabes que a partir de cierto punto no hay respuesta (posible firewall, o red ca√≠da). Traceroute tambi√©n revela si la ruta es indirecta. En entornos AWS, puedes usar traceroute desde una instancia para ver c√≥mo sale a Internet, o desde tu PC a ver c√≥mo entra. Ten en cuenta que algunos routers (especialmente en la red de AWS) podr√≠an no responder a traceroute (aparecen como * * * asteriscos) porque bloquean ICMP o de prop√≥sito no revelan su presencia Ôøº. Aun as√≠, obtienes la mayor√≠a de saltos.

Ejemplo de diagn√≥stico: Supongamos que ‚Äúno me conecto a mi instancia‚Äù. ¬øC√≥mo abordar?:
	1.	Ping a la IP:
	‚Ä¢	Si responde, al menos la instancia est√° activa y accesible a nivel IP/ICMP. Si no, puede estar apagada, sin internet, o firewall ICMP bloqueado. Un ping fallido no es conclusivo pero da pistas.
	2.	Telnet o nc al puerto 22 (o usando ssh -v para ver detalles):
	‚Ä¢	¬øSe puede abrir conexi√≥n TCP al 22? Si no, es probable un firewall SG bloquea o no hay ruta (o servicio ssh ca√≠do). Si s√≠ se abre pero luego se cierra, podr√≠a ser credenciales.
	3.	Traceroute:
	‚Ä¢	Si muere cerca del destino, podr√≠a ser que la instancia no tiene ruta de vuelta (e.g. falta IGW o NAT), o NACL bloquea. Si muere en mitad de internet, un problema de proveedor.
	‚Ä¢	Por ejemplo, traceroute desde tu PC a la IP p√∫blica de la instancia: si ves que llega hasta la red de Amazon y luego timeout en el √∫ltimo salto, sospecha de SG o host firewall bloqueando.
	‚Ä¢	Traceroute desde la instancia hacia tu IP (o 8.8.8.8) tambi√©n √∫til: si no sale de la VPC, quiz√°s no hay IGW o NAT (salto 1 es router VPC, luego nada).
	4.	Revisar configuraci√≥n AWS: ¬øInstancia en subred p√∫blica con IGW? ¬øTiene IP p√∫blica asociada? ¬øSG permite 22 desde tu IP? Estas suelen ser las causas #1 de ‚Äúno me conecto‚Äù.
	5.	Caso pr√°ctico: Si un alumno dice ‚Äúno puedo hacer SSH a la instancia‚Äù, revisar: ‚Äì ¬øSe abri√≥ puerto 22 en SG? ‚Äì ¬øEst√°s usando la IP p√∫blica correcta? ‚Äì ¬øTu m√°quina est√° en internet? ‚Äì ¬øLa instancia est√° en running? ‚Äì ¬øClave correctay chmod 400? ‚Äì Si todo parece correcto, probar ping/traceroute: ping no responde (posible ICMP block, ok), traceroute muestra ruta bien hasta AWS, ergo conectividad hay hasta all√°, entonces probablemente es SG. O tal vez olvid√≥ asociar la IP el√°stica o la instancia no tiene IP p√∫blica!

Ping en AWS Labs: A veces en labs se permite ping entre instancias para probar conexi√≥n privada: debes permitir ICMP Echo en los SG de ambas. ping puede decirte ‚Äús√≠ hay red L3 entre A y B‚Äù. Si no hay ping, quiz√° est√°n en subredes distintas sin ruta, o en diferentes VPC (incomunicadas), etc.

Otro uso ‚Äì medir latencia: Ping te dice el delay. Entre tu PC y AWS podr√°s ver quiz√°s 50ms (depende distancia), entre instancias en misma AZ <1ms, en distinta AZ unos ms, etc. Interesante para saber penalizaciones de red.

En s√≠ntesis, ping = comprobar alcance y tiempo, traceroute = mapear el camino Ôøº Ôøº. Son tus amigos cuando algo no responde. Siempre ten en cuenta firewalls que puedan interferir en sus resultados. Al terminar esta unidad, deber√≠as poder pensar: ‚ÄúNo puedo acceder a X, ¬øhago ping? ¬øtraceroute? A ver d√≥nde se corta‚Ä¶‚Äù, y combinar con revisar SG/NAT/etc., para deducir la causa.



### Conclusi√≥n y pr√≥ximos pasos

Hemos cubierto los 11 temas clave de redes que te preparan para trabajar con cloud:
	‚Ä¢	Qu√© es una red (LAN/WAN/Internet) y estar ‚Äúconectado‚Äù.
	‚Ä¢	Direcciones IP (identidad en la red), p√∫blicas vs privadas.
	‚Ä¢	Subredes y m√°scaras (segmentar redes, especialmente en AWS VPC).
	‚Ä¢	NAT e Internet en AWS (salida para instancias privadas, IGW para p√∫blicas).
	‚Ä¢	DHCP (asignaci√≥n autom√°tica de IPs, cambios de direcciones).
	‚Ä¢	Puertos y protocolos (puerta l√≥gica de servicios; 22, 80, 443; TCP vs UDP).
	‚Ä¢	Firewall (filtros de puertos; SG de AWS vs firewall del SO).
	‚Ä¢	DNS (resoluci√≥n de nombres, agenda de Internet).
	‚Ä¢	Acceso remoto (SSH; necesitar IP, puerto 22 abierto, clave).
	‚Ä¢	VPN (t√∫nel seguro para conectar redes o clientes remotos).
	‚Ä¢	Diagn√≥stico b√°sico (ping/traceroute para verificar conexi√≥n).

Con este conocimiento, cuando en los laboratorios AWS veas t√©rminos como ‚Äúconfigure la VPC y subnets‚Äù, ‚Äúasocie un Elastic IP‚Äù, ‚Äúabra el puerto 80 en el SG‚Äù, ‚Äúla instancia no tiene salida a internet‚Äù, ‚Äúcon√©ctese por SSH utilizando la clave‚Äù, ‚Äúestablezca una VPN Site-to-Site para la conexi√≥n on-premises‚Äù, etc., tendr√°s una base s√≥lida para entender de qu√© se habla y por qu√©.

Glosario R√°pido:
	‚Ä¢	Red LAN/WAN: LAN es red local (peque√±a, alta velocidad) Ôøº, WAN es red de amplia √°rea (larga distancia, une LANs) Ôøº. Internet es la WAN global Ôøº.
	‚Ä¢	Direcci√≥n IP: Identificador √∫nico num√©rico de un dispositivo en la red (ej. 192.168.1.50) Ôøº. Necesario para enviar datos al destinatario correcto.
	‚Ä¢	IP P√∫blica/Privada: P√∫blica es global, √∫nica en Internet; privada solo v√°lida en redes internas Ôøº. Rangos privados comunes: 10.x.x.x, 172.16-31.x.x, 192.168.x.x Ôøº.
	‚Ä¢	Subred: Porci√≥n de una red dividida l√≥gicamente. Tiene un rango de IP m√°s peque√±o dentro de uno mayor Ôøº. En AWS, subred p√∫blica (con IGW) vs privada (sin IGW) Ôøº.
	‚Ä¢	M√°scara de subred: Notaci√≥n (ej. /24) que indica qu√© parte de la IP es la red. Define el tama√±o de la subred.
	‚Ä¢	NAT (Network Address Translation): Traducci√≥n de IP privadas a una p√∫blica para permitir salida a Internet compartida Ôøº. Impide accesos entrantes no solicitados.
	‚Ä¢	Internet Gateway (IGW): Puerta de enlace de una VPC a Internet. Necesaria para que IPs p√∫blicas funcionen Ôøº.
	‚Ä¢	DHCP: Protocolo que asigna IP autom√°ticamente a dispositivos al conectarse Ôøº (junto a gateway, DNS‚Ä¶). Hace que las IP puedan cambiar din√°micamente.
	‚Ä¢	Puerto: N√∫mero que identifica un servicio en un host (0-65535). Ej: puerto 22=SSH, 80=HTTP, 443=HTTPS Ôøº Ôøº.
	‚Ä¢	Protocolo TCP/UDP: TCP fiable orientado a conexi√≥n (uso general web, SSH) Ôøº; UDP no orientado y sin garantias pero r√°pido (stream, DNS) Ôøº.
	‚Ä¢	Firewall: Filtro de tr√°fico por reglas. Puede bloquear puertos, IPs, etc. SG de AWS es un firewall virtual por instancia Ôøº.
	‚Ä¢	Security Group: Firewall de AWS asociado a instancia; define tr√°fico permitido entrante/saliente Ôøº.
	‚Ä¢	DNS: Sistema de Nombres de Dominio. Traduce nombres legibles (ej. ejemplo.com) a IPs y viceversa Ôøº. Como una agenda telef√≥nica de Internet.
	‚Ä¢	SSH: Secure Shell, protocolo de acceso remoto seguro a una consola de otro host (Linux). Usa claves y puerto 22.
	‚Ä¢	Clave (Key Pair) AWS: Par criptogr√°fico para SSH. La privada (.pem) la tiene el usuario, la p√∫blica se instala en la instancia para autenticar sin password.
	‚Ä¢	VPN: Red privada virtual. T√∫nel cifrado sobre Internet que conecta redes o usuarios de forma segura Ôøº. Ej: VPN sitio-a-sitio oficina‚ÜîAWS Ôøº, o VPN de cliente para teletrabajo.
	‚Ä¢	Ping: Comando para probar conectividad con ICMP Echo. Respuesta indica host alcanzable y da tiempo (latencia).
	‚Ä¢	Traceroute: Comando para listar la ruta (hops) que siguen los paquetes hasta destino Ôøº. √ötil para localizar d√≥nde se corta o ralentiza la conexi√≥n.
	‚Ä¢	Salida a Internet: Capacidad de una instancia/red de iniciar conexiones hacia Internet. Requiere ruta IGW/NAT y a veces IP p√∫blica. ‚ÄúSin salida a internet‚Äù = aislado, no puede navegar/actualizar.
	‚Ä¢	Entrada desde Internet: Capacidad de recibir conexiones iniciadas desde fuera (requiere IP p√∫blica + puertos abiertos + ruta IGW).

Con todo esto, est√°s listo para enfrentar los labs de Cloud AWS Fundamentals sin miedo a la palabra ‚Äúred‚Äù. ü§ì¬°Manos a la obra! Y recuerda: si algo no conecta, revisa IP ‚Üí Puertos ‚Üí Firewall ‚Üí Rutas/DNS; la soluci√≥n suele estar all√≠. ¬°√âxitos en la nube! Ôøº Ôøº